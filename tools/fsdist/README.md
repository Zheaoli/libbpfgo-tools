# fsdist

## build

```
make
```

## run

```
$ sudo ./fsdist -t ext4
Tracing ext4 operation latency... Hit Ctrl-C to end.
^C
operation = 'read'
     usecs               : count    distribution
         0 -> 1          : 455      |****************************************|
         2 -> 3          : 176      |***************                         |
         4 -> 7          : 136      |***********                             |
         8 -> 15         : 95       |********                                |
        16 -> 31         : 30       |**                                      |
        32 -> 63         : 12       |*                                       |
        64 -> 127        : 6        |                                        |
       128 -> 255        : 2        |                                        |
       256 -> 511        : 1        |                                        |
       512 -> 1023       : 1        |                                        |

operation = 'write'
     usecs               : count    distribution
         0 -> 1          : 3        |*****                                   |
         2 -> 3          : 2        |***                                     |
         4 -> 7          : 1        |*                                       |
         8 -> 15         : 1        |*                                       |
        16 -> 31         : 1        |*                                       |
        32 -> 63         : 2        |***                                     |
        64 -> 127        : 1        |*                                       |
       128 -> 255        : 10       |*******************                     |
       256 -> 511        : 13       |************************                |
       512 -> 1023       : 16       |******************************          |
      1024 -> 2047       : 21       |****************************************|
      2048 -> 4095       : 5        |*********                               |
      4096 -> 8191       : 2        |***                                     |
      8192 -> 16383      : 0        |                                        |
     16384 -> 32767      : 1        |*                                       |
     32768 -> 65535      : 2        |***                                     |
     65536 -> 131071     : 0        |                                        |
    131072 -> 262143     : 1        |*                                       |
    262144 -> 524287     : 1        |*                                       |
    524288 -> 1048575    : 1        |*                                       |
   1048576 -> 2097151    : 3        |*****                                   |

operation = 'open'
     usecs               : count    distribution
         0 -> 1          : 25       |*                                       |
         2 -> 3          : 90       |******                                  |
         4 -> 7          : 42       |***                                     |
         8 -> 15         : 546      |****************************************|
        16 -> 31         : 98       |*******                                 |
        32 -> 63         : 42       |***                                     |
        64 -> 127        : 29       |**                                      |
       128 -> 255        : 9        |                                        |
       256 -> 511        : 13       |                                        |
       512 -> 1023       : 7        |                                        |
      1024 -> 2047       : 5        |                                        |
      2048 -> 4095       : 3        |                                        |
      4096 -> 8191       : 1        |                                        |
      8192 -> 16383      : 1        |                                        |

operation = 'getattr'
     usecs               : count    distribution
         0 -> 1          : 584      |****************************************|
         2 -> 3          : 373      |*************************               |
         4 -> 7          : 169      |***********                             |
         8 -> 15         : 90       |******                                  |
        16 -> 31         : 26       |*                                       |
        32 -> 63         : 129      |********                                |
        64 -> 127        : 42       |**                                      |
       128 -> 255        : 53       |***                                     |
       256 -> 511        : 41       |**                                      |
       512 -> 1023       : 28       |*                                       |
      1024 -> 2047       : 9        |                                        |
      2048 -> 4095       : 9        |                                        |
      4096 -> 8191       : 2        |                                        |
      8192 -> 16383      : 0        |                                        |
     16384 -> 32767      : 1        |                                        |
     32768 -> 65535      : 0        |                                        |
     65536 -> 131071     : 0        |                                        |
    131072 -> 262143     : 0        |                                        |
    262144 -> 524287     : 0        |                                        |
    524288 -> 1048575    : 0        |                                        |
   1048576 -> 2097151    : 0        |                                        |
   2097152 -> 4194303    : 0        |                                        |
   4194304 -> 8388607    : 1        |                                        |

```

```
$ sudo ./fsdist -t ext4 10 2
Tracing ext4 operation latency... Hit Ctrl-C to end.

operation = 'getattr'
     usecs               : count    distribution
         0 -> 1          : 51       |****************************************|
         2 -> 3          : 18       |**************                          |
         4 -> 7          : 6        |****                                    |
         8 -> 15         : 0        |                                        |
        16 -> 31         : 0        |                                        |
        32 -> 63         : 0        |                                        |
        64 -> 127        : 0        |                                        |
       128 -> 255        : 0        |                                        |
       256 -> 511        : 0        |                                        |
       512 -> 1023       : 0        |                                        |
      1024 -> 2047       : 0        |                                        |
      2048 -> 4095       : 0        |                                        |
      4096 -> 8191       : 0        |                                        |
      8192 -> 16383      : 0        |                                        |
     16384 -> 32767      : 0        |                                        |
     32768 -> 65535      : 0        |                                        |
     65536 -> 131071     : 0        |                                        |
    131072 -> 262143     : 0        |                                        |
    262144 -> 524287     : 0        |                                        |
    524288 -> 1048575    : 0        |                                        |
   1048576 -> 2097151    : 0        |                                        |
   2097152 -> 4194303    : 0        |                                        |
   4194304 -> 8388607    : 1        |                                        |


operation = 'read'
     usecs               : count    distribution
         0 -> 1          : 12       |*************************               |
         2 -> 3          : 19       |****************************************|
         4 -> 7          : 13       |***************************             |
         8 -> 15         : 10       |*********************                   |
        16 -> 31         : 6        |************                            |
        32 -> 63         : 2        |****                                    |
        64 -> 127        : 0        |                                        |
       128 -> 255        : 0        |                                        |
       256 -> 511        : 4        |********                                |
       512 -> 1023       : 3        |******                                  |
      1024 -> 2047       : 0        |                                        |
      2048 -> 4095       : 1        |**                                      |

operation = 'getattr'
     usecs               : count    distribution
         0 -> 1          : 119      |****************************************|
         2 -> 3          : 55       |******************                      |
         4 -> 7          : 15       |*****                                   |
         8 -> 15         : 3        |*                                       |
        16 -> 31         : 0        |                                        |
        32 -> 63         : 1        |                                        |
        64 -> 127        : 0        |                                        |
       128 -> 255        : 0        |                                        |
       256 -> 511        : 0        |                                        |
       512 -> 1023       : 0        |                                        |
      1024 -> 2047       : 0        |                                        |
      2048 -> 4095       : 0        |                                        |
      4096 -> 8191       : 0        |                                        |
      8192 -> 16383      : 0        |                                        |
     16384 -> 32767      : 0        |                                        |
     32768 -> 65535      : 0        |                                        |
     65536 -> 131071     : 0        |                                        |
    131072 -> 262143     : 0        |                                        |
    262144 -> 524287     : 0        |                                        |
    524288 -> 1048575    : 0        |                                        |
   1048576 -> 2097151    : 0        |                                        |
   2097152 -> 4194303    : 0        |                                        |
   4194304 -> 8388607    : 2        |                                        |

```
